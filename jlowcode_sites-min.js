/**
 * Jlowcode sites
 *
 * @copyright:   Copyright (C) 2025 Jlowcode Org - All rights reserved.
 * @license  : GNU/GPL http://www.gnu.org/copyleft/gpl.html
 */
define(["jquery","fab/fabrik"],(function(e,i){"use strict";return new Class({Implements:[Events],options:{emptyUrl:!0},initialize:function(e){var i=this;switch(i.options=e,e.process){case"website":i.initWebsite(e);break;case"itens":i.initItens(e)}},initWebsite:function(){this.setEventFillUrlByTitle()},setEventFillUrlByTitle:function(){var i=this;e("#sites___name").on("input",(function(){const n=e("#sites___url");let t=this.value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-");i.options.emptyUrl&&t.length<24&&n.val(t)})),e("#sites___url").on("input",(function(){i.options.emptyUrl=!1}))},initItens:function(){var i=this;e("#itens_do_menu___menu_item").closest(".fabrikinput").css("padding","0px"),e(".fabrikGroup").css("margin-top","0px"),e(".fabrikGroup").css("display","inherit"),i.setEventsHomePage(),i.setEventsMenuItensType(),i.toggleTypeOptions(e('input[name="itens_do_menu___menu_home_page[]"]:checked').val()),i.toggleElementsByMenuType(e("#itens_do_menu___menu_type").html()),i.toggleElementsByMenuType(e("#itens_do_menu___menu_type").val()),i.options.newWebsite&&i.configureForNewWebsite()},configureForNewWebsite:function(){e('input[name="itens_do_menu___menu_home_page[]"][value="1"]').prop("checked",!0),e('input[name="itens_do_menu___menu_home_page[]"]').click(),e("#itens_do_menu___menu_type").val("lista").change()},setEventsHomePage:function(){var i=this;e('input[name="itens_do_menu___menu_home_page[]"]').on("click",(function(){var n=e(this).val();i.toggleTypeOptions(n)}))},setEventsMenuItensType:function(){var i=this;e("#itens_do_menu___menu_type").on("change",(function(){i.toggleElementsByMenuType(e(this).val())}))},toggleElementsByMenuType:function(i){var n=e("#itens_do_menu___menu_list"),t=e("#itens_do_menu___menu_link"),a=e("#itens_do_menu___menu_item"),s=e("#itens_do_menu___menu_home_page"),o=e("#itens_do_menu___menu_content");switch(i){case"Lista":case"lista":case"Formulário adicionar":case"formulario_adicionar":n.closest(".fabrikElementContainer").removeClass("fabrikHide"),t.closest(".fabrikElementContainer").addClass("fabrikHide"),a.closest(".fabrikElementContainer").addClass("fabrikHide"),s.closest(".fabrikElementContainer").removeClass("fabrikHide"),o.closest(".fabrikGroup").addClass("fabrikHide");break;case"Visualização do item":case"visualizacao_do_item":n.closest(".fabrikElementContainer").removeClass("fabrikHide"),t.closest(".fabrikElementContainer").addClass("fabrikHide"),a.closest(".fabrikElementContainer").removeClass("fabrikHide"),s.closest(".fabrikElementContainer").removeClass("fabrikHide"),o.closest(".fabrikGroup").addClass("fabrikHide");break;case"Link externo":case"link_externo":n.closest(".fabrikElementContainer").addClass("fabrikHide"),t.closest(".fabrikElementContainer").removeClass("fabrikHide"),a.closest(".fabrikElementContainer").addClass("fabrikHide"),s.closest(".fabrikElementContainer").addClass("fabrikHide"),o.closest(".fabrikGroup").addClass("fabrikHide");break;case"Página":case"pagina":n.closest(".fabrikElementContainer").addClass("fabrikHide"),t.closest(".fabrikElementContainer").addClass("fabrikHide"),a.closest(".fabrikElementContainer").addClass("fabrikHide"),s.closest(".fabrikElementContainer").removeClass("fabrikHide"),o.closest(".fabrikGroup").removeClass("fabrikHide")}},toggleTypeOptions:function(i){var n=e("#itens_do_menu___menu_type");"1"===i?n.find("option").not('[value="lista"], [value="pagina"], [value="formulario_adicionar"], [value="visualizacao_do_item"]').hide():n.find("option").not('[value="lista"], [value="pagina"], [value="formulario_adicionar"], [value="visualizacao_do_item"]').show()}})}));